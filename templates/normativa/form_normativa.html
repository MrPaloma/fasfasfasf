{% extends 'base_nfr.html' %}
{% load static %}

{% block css %}
{% endblock %}

{% block content %}
    <div class="container">
        <h1 class="text-center">Registrar Normativa</h1>
        <br><br>
        
        {% if errors %}
            <div class="alert alert-error">
            <h4>Please fix the following errors</h4>
            <ul>
                {% for field in form %}
                {% if field.errors %}
                    {% for error in field.errors %}
                    <li><a href="#id_{{ field.name }}" class="error">{{ error|escape }}</a></li>
                    {% endfor %}
                {% endif %}
                {% endfor %}
            </ul>
            {% if form.non_field_errors %}
                {{ form.non_field_errors }}
            {% endif %}
            </div>
        {% endif %}

        <form method='POST' action="{% url 'registrar-normativa' %}" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="row">
                <div class="col-6">
                    <label for="norma">Norma</label>
                    <input type="text" class="form-control" name="norma" required/>
                </div>
                <div class="col-6">
                        <div class="form-group">
                            <label for="name_deno">Titulo</label>
                            <input type="text" name="name_deno" class="form-control" required/>
                        </div>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <label for="base">Base Legal</label>
                    <input type="text" name="base_legal" class="form-control" required/>
                </div>
                <div class="col-6">
                    <div class="form-group">
                        <label for="fecha_publi">Publicacion</label>
                        <input type="date" name="fecha_publi" class="form-control" required  min="1900-01-01" max="{{fecha_hoy}}"/>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <label> Tipo de Norma: </label>
                    <select class="form-control" aria-label="Default select example" name="tip_norma" >
                            {% for a in normativa %}
                                <option value="{{a.id}}">{{a.subcategory_name}}</option>
                            {% endfor %}
                    </select>
                </div>
                    <div class="col-6">
                        <label> Tipo de Uso: </label>
                        <select class="form-control" aria-label="Default select example" name="tip_uso">
                            {% for tipo in tipo_uso %}
                                <option value="{{tipo.id }}">{{tipo.area_name }}</option>
                            {% endfor %}
                        </select>
                    </div>
            </div>
            <br>
            <div class="row">
                <div class="col-6">
                    <div class="form-group">
                        <label>Adjuntar Documento</label><br>
                        <input type="file" name="documento"/>
                    </div>
                    <div class="form-group">
                        <div class="custom-control custom-switch">
                            <input type="checkbox" class="custom-control-input" id="es_vigente" name="es_vigente">
                            <label class="custom-control-label" for="es_vigente">Vigente</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="custom-control custom-switch">
                            <input type="checkbox" class="custom-control-input" id="es_foro" name="es_foro">
                            <label class="custom-control-label" for="es_foro">Foro</label>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <label>Descripci√≥n breve</label><br>
                    <textarea class="form-control" rows="5" maxlength="200" name="descripcion"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label>
                    Palabra Clave:
                </label>
                <select class="form-control select-tags" name="palabras_clave[]" multiple="multiple" style="width:100%;" id="select4">
                    {% for pc in palabras_clave %}
                        <option value="{{pc.name}}"> {{pc.name}} </option>
                    {% endfor %}
                </select>    
            </div>
            <br>
            <div class="row">
                <div class="col">
                   <button class="btn btn-block btn-primary" type="submit">
                    <i class="fa-solid fa-floppy-disk"></i>
                    Guardar
                   </button>
                </div>
            </div>

        </form>

    </div>
{% endblock %}


{% block js %}
{% endblock %}